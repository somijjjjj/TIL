# 해시 테이블(hash table)

해시 테이블은 데이터 구조의 하나이다. '해시 함수'와 함께 데이터 검색을 효율적으로 하기 위해 사용되는 구조다.

![](https://velog.velcdn.com/images/silver0/post/ad0e03a1-fbc8-4e10-bf44-6e9f3dbf4033/image.png)

해시 테이블은 키(Key)와 값(Value)이 한 쌍을 이루는 데이터를 저장한다.  
위 그림에서는 각 사람의 성별을 데이터로 저장하고 있으며, 이름을 키로, 성별을 값으로 저장하고 있다.  

![](https://velog.velcdn.com/images/silver0/post/66e2b383-8961-48f3-b914-a9fac2931306/image.png)


해시 테이블의 특징을 비교하기 위해 6개로 상자로 이루어진 배열에 데이터를 저장한다.  
Ally의 성별을 알고 싶은데 배열의 몇 번째에 저장되어 있는지 모르므로 앞에서부터 차례대로 확인해야 한다.(선형 탐색)  

선형 탐색은 데이터양에 비례해서 계산 시간이 늘어난다.  
배열 탐색에 시간이 걸리므로 탐색에는 적합하지 않은 구조라는 것을 알 수 있다.  

이 문제를 해결해주는 것이 <span style="background-color:#e74c3c">해시 테이블</span>이다.  
'해시 함수'를 이용해서 키에 해당하는 해시값을 계산한다.  
구한 해시값을 배열의 수로 나누어 나머지를 구한 뒤  (나눗셈의 나머지를 구하는 연산 'mod')  
구한 수와 같은 배열의 상자에 저장한다.  

|Key|hash값|mod연산|배열숫자|
|:----:|:----:|:----:|:----:|
|Joe|4928|mod 5|3
|Sue|7291|mod 5|1
|Dan|1539|mod 5|4
|Nell|6276|mod 5|1
|Ally|9143|mod 5|3
|Bob|5278|mod 5|3

![](https://velog.velcdn.com/images/silver0/post/d220ce16-caa1-4542-b75e-5fb2630983fd/image.png)


Nell의 데이터가 저장될 위치(1번)에는 이미 Sue의 데이터가 저장되어 있다.  
그리고 Ally, Bob데이터가 저장될 위치(3번)에도 Joe가 저장되어 있다.  

이렇게 데이터 저장 위치가 겹치는 것을 '충돌'이라고 한다.  
이런 경우에는 리스트 구조로 기존 데이터와 연결한다.  

![](https://velog.velcdn.com/images/silver0/post/e6d9c2be-ecab-4bb2-9799-a21ad31b5741/image.png)

### 데이터 검색 방법

Dan의 성별을 확인하고 싶은 경우.  
Dan이 배열의 몇 번 상자에 저장돼 있는지 알기 위해서 Key인 'Dan'의 해시값을 구하고  
배열의 상자 수인 5로 mod 연산을 한다.  
결과는 4이므로 4번 상자에 저장돼 있는 것을 알 수 있다.  
4번 상자에가서 'Dan'과 일치하는 데이터의 대응 값을 추출하면 성별을 알 수 있다.  

리스트로 연결되어 있는 데이터인 경우 해당 데이터를 선두로 만들어진 리스트를 선형 탐색을 실시한다.  

### 특징
  
해시 테이블은 해시 함수를 이용해서 배열 내의 특정 데이터에 빠르게 접근할 수 있다.  
해시값이 충돌할 때는 리스트를 이용하고 있어서 저장할 데이터 수가 정해져 있지 않더라도 유연하게 대응할 수 있다.  
해시 테이블에 사용하는 배열의 크기는 너무 작으면 충돌이 많아지고 선형 탐색의 빈도가 높아지게 된다.  
반대로 크기가 너무 크면 데이터가 없는 사자가 많아져서 메모리를 낭비하게 된다.  
따라서, 배열의 크기를 적절히 설정하는 것이 좋다.  

리스트를 사용하여 기존 데이터 뒤에 연결하는 방법을 '연쇄법(또는 체이닝(chaining)'이라고 한다.  

충돌 시의 처리 방법에는 연쇄법 이외에도 몇 가지가 있다.  
- 개방 주소법(open addressing)
   - 충돌이 발생한 경우 다음 후보가 될 주소(배열상의 위치)를 구해서 거기에 저장하는 방식이다.
   - 해당 주소에도 데이터가 존재한다면 다음 후보 주소를 구하며 비어 있는 곳을 찾을 때까지 다음번 주소를 구한다.
   - '다음 주소'를 어떻게 구하는가는 해시 함수를 여러 개 사용하는 방법이나 '선형 탐사'등 몇 가지 방법이 있다.

데이터의 유연한 저장과 빠른 접근이 가능한 해시 테이블은 프로그래밍 언어의 연관 배열(associative array)등에 사용되고 잇다.  


---

<br>
<br>

> Reference
> - 『알고리즘 도감』, 이시다 모리테루, 미야자키 쇼이치 - 제이펍